# ICON
#
# ------------------------------------------
# Copyright (C) 2004-2025, DWD, MPI-M, DKRZ, KIT, ETH, MeteoSwiss
# Contact information: icon-model.org
# See AUTHORS.TXT for a list of authors
# See LICENSES/ for license information
# SPDX-License-Identifier: BSD-3-Clause
# ------------------------------------------

spack:
  packages:
    all:
      variants: +cuda cuda_arch=90
    mpi:
      require: [cray-mpich@8.1.30%nvhpc]
    icon-exclaim:
      package_attributes:
        build_directory: /iopsstor/scratch/cscs/ajocksch/coupled_gt4py_re/icon-exclaim/santis_gpu_nvhpc_py_substitute
  specs:
  - cosmo-eccodes-definitions@2.36.0.3
  - icon4py@=git.b6779bd83a21580ec7d02d7cdd59f15209a5d941
  - icon-exclaim@develop%nvhpc dsl=substitute +grib2 +eccodes-definitions +ecrad ~emvorado
    +art +dace gpu=nvidia-90 +mpi-gpu +realloc-buf ~aes +jsbach +ocean +coupling ~rte-rrtmgp
    +pgi-inlib ~loop-exchange +async-io-rma +cuda-graphs fflags="-traceback"
  view: true
  concretizer:
    unify: true
  develop:
    icon-exclaim:
      spec: icon-exclaim@=develop
      path: /iopsstor/scratch/cscs/ajocksch/coupled_gt4py_re/icon-exclaim
